<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="img-div">
            <div class="logo-div">
                <img src="./images/odin-lined.png">
                <label class="logo-text">ODIN</label>                
            </div>
            <div class="img-ref">
                <label>Photo by <a href="https://unsplash.com/@haliewestphoto" target="_blank">Halie West</a> on <a href="https://unsplash.com/" target="_blank">unsplash</a></label>
            </div>            
        </div>
        <div class="content-div">
            <div class="content-one">
                <div class="paragraph-div">
                    <p>This is for a real online service! You know you need something like this in your life to help you realize your deepest dreams. Sign up <i>now</i> to get started.</p>
                    <p>You <i>know</i> you want to succeed.</p>
                </div>                
            </div>
            <div class="content-two">
                <p>Let's do this!</p>
                <form method="post" action="after_submit.html" id="frm">
                    <div class="row-one">
                        <div class="inc">
                            <label for="firstname">FIRST NAME</label>
                            <input type="text" id="firstname" name="firstname">
                        </div>
                        <div class="inc">
                            <label for="lastnmae">LAST NAME</label>
                            <input type="text" id="lastnmae" name="lastname">
                        </div>
                    </div>
                    <div class="row-two">
                        <div class="inc">
                            <label for="email">EMAIL</label>
                            <input type="email" id="email" name="email">
                        </div>
                        <div class="inc">
                            <label for="phonenumber">PHONE NUMBER</label>
                            <input type="tel" id="phonenumber" name="phonenumber">
                        </div>
                    </div>
                    <div class="row-three">
                        <div class="inc">
                            <label for="pw1">PASSWORD</label>
                            <input type="password" id="pw1" name="password">
                            <label id="password-alert">numbers, letters or @, #, $, _ length of 8-10</label>
                        </div>
                        <div class="inc">
                            <label for="pw2">CONFIRM PASSWORD</label>
                            <input type="password" id="pw2" name="passwordcheck">
                        </div>
                    </div>
                </div>
                <div class="content-three">
                    <button type="submit" id="btn-submit">Create Account</button>                   
                </form>
                    <p class="signup">Already have an account? <a href="#">Log in</a></p>
                </div>
        </div>
    </div>

    <script src="validation.js"></script>

    <script>
        document.getElementById('frm').addEventListener('submit', function(e){           

            //input values
            let firstname = document.querySelector("#firstname").value;
            let lastname = document.querySelector("#lastnmae").value;
            let email = document.querySelector("#email").value;
            let phonenumber = document.querySelector("#phonenumber").value;
            let passwd = document.querySelector("#pw1").value;
            let re_passwd = document.querySelector("#pw2").value;

            //password alert label
            let err_msg = document.querySelector("#password-alert");

            //regular expressions
            const name_match = /^[A-Z][a-zA-Z '.-]*[A-Za-z][^-]$/;
            const email_match = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            const phonenumber_match = /^(\+?\s*(\d\s*){7,15})$/;
            const password_match = /^([a-zA-Z0-9@#$_]{8,10})$/;

            console.log(password_match.test(passwd));

            //check if user entered valid inputs
            if(name_match.test(firstname) && name_match.test(lastname) && email_match.test(email) && phonenumber_match.test(phonenumber) && password_match.test(passwd)){
                //check if password matches with confirm password
                if(passwd.localeCompare(re_passwd) != 0){    
                    e.preventDefault();           
                    err_msg.innerText = "Password mismatch";
                    return false;
                }else{
                    return true;
                }
                return false;
            }else{
                e.preventDefault(); 
            }           
        })
    </script>

</body>
</html>